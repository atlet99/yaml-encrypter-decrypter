# About YED

Этот код представляет собой приложение на Go, предназначенное для шифрования и дешифрования данных в YAML-файлах с использованием алгоритма AES. Он может работать с отдельными значениями или блоками данных из YAML, предоставляя возможности командной строки для управления.

## Основные возможности:

1. Шифрование и дешифрование данных:
    • Позволяет шифровать или расшифровывать отдельные значения, используя предоставленный `AES-ключ`.
    • Работает с указанными блоками данных (`YAML-блоки`, определённые в конфигурации или переданные в параметрах).

2. Работа с YAML-файлами:
	• Программа читает `YAML-файлы`, определяет, какие блоки данных необходимо шифровать или дешифровать, и применяет операцию.

3. Гибкость конфигурации:
	• Поддерживает конфигурационные файлы для разных сред (например, dev, test).
	• Если ключ не указан в параметрах запуска, программа пытается взять его из конфигурационного файла.

4.	Командный интерфейс (CLI): 
      - Предоставляет различные флаги для настройки:    
```shell
    --version – показать версию приложения.
    --key – задать AES-ключ для операций шифрования/дешифрования.
	--env – указать среду для выбора соответствующего конфигурационного файла.
	--filename – указать YAML-файл для обработки.
	--value – указать отдельное значение для шифрования или дешифрования.
	--operation – указать операцию (encrypt или decrypt).
	--dry-run – показать результат операций без изменения файлов.
```
5.	Чтение версии:
      - Версия программы считывается из файла .release-version.

### Основные компоненты:
1.	Загрузка конфигурации:
Метод loadConfig загружает базовую и средовую конфигурацию YAML. Это позволяет программе использовать разные настройки для разных окружений.

2. Шифрование/дешифрование значений: 
   - Использует функции `encryption.Encrypt` и `encryption.Decrypt` для работы с данными.
   - Обрабатывает строки с префиксом `AES256:` как зашифрованные данные.

3. Работа с YAML-файлами:
     - Метод processYamlFile проходит по строкам файла, определяет блоки, которые необходимо обработать, и применяет операции шифрования или дешифрования.

4. CLI-интерфейс: 
   - Использует стандартный пакет flag для парсинга аргументов командной строки. 
   - Предоставляет кастомизированную функцию flag.Usage для отображения информации о программе.

### Пример использования:

1.	Шифрование значения:
```shell
go run main.go --key "my-secret-key" --value "my-sensitive-data" --operation encrypt
```
Результат: строка будет зашифрована и возвращена с префиксом `AES256:`.

2.	Расшифровка значения:
```shell
go run main.go --key "my-secret-key" --value "AES256:encrypted-data" --operation decrypt
```

3.	Обработка YAML-файла:
```shell
go run main.go --key "my-secret-key" --filename "configs/values.yaml" --operation encrypt --env-blocks "dev"
```

## Для чего нужен код:

Код полезен в следующих сценариях:
 - Защита конфиденциальных данных в конфигурационных файлах YAML (например, паролей, ключей API).
 - Обеспечение безопасности конфигураций для разных окружений (dev, test, prod).
 - Быстрая обработка данных через интерфейс командной строки для DevOps или разработчиков.

Этот инструмент может быть полезен для управления секретами в средах, где YAML используется для хранения конфигураций, например, в Kubernetes или других системах управления инфраструктурой.